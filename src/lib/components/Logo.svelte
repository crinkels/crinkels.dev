<script>
	import { spring } from 'svelte/motion';

	let triggered = false;
	let springyRotation = spring(0, { stiffness: 0.2, damping: 0.15 });
	$: springyRotation.set(triggered ? 10 : 0);
	$: style = `transform: rotate(${$springyRotation}deg)`;

	$: if (triggered)
		window.setTimeout(() => {
			triggered = false;
		}, 200);

	function trigger() {
		triggered = true;
	}

	let klass = undefined;
	export { klass as class };
</script>

<a
	on:mouseenter={trigger}
	on:click={trigger}
	{style}
	href="/"
	aria-label="Logo that redirects to the homepage"
	class={`logo ${klass}`}
>
	<svg viewBox="0 0 238 280" width="29" height="35" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path
			fill-rule="evenodd"
			clip-rule="evenodd"
			d="M29.0584 59.905L104.266 9.49255C123.148 -3.16417 147.868 -3.16419 166.75 9.49253L213.327 40.714C246.141 62.7095 246.284 110.731 213.397 132.775L202.619 140L213.327 147.178C246.178 169.198 246.178 217.266 213.327 239.286L166.75 270.507C147.868 283.164 123.148 283.164 104.266 270.507L28.952 220.024C12.1679 210.859 0 193.315 0 171.365V108.635C0 86.6396 12.2183 69.0577 29.0584 59.905ZM27.9398 108.922C27.9398 99.6881 32.5567 91.0579 40.2587 85.8952L43.4214 83.7752C51.8861 79.5771 62.4584 79.547 71.5004 85.6079L81.0253 91.9925V188.007L71.523 194.377C62.4441 200.463 51.8258 200.412 43.343 196.172L40.2587 194.105C32.5567 188.942 27.9398 180.312 27.9398 171.078V108.922ZM108.965 169.279V110.721L152.645 140L108.965 169.279ZM80.6508 221.18L119.887 247.48C129.328 253.809 141.688 253.809 151.129 247.48L197.706 216.259C214.132 205.249 214.132 181.215 197.706 170.205L177.632 156.749L87.1438 217.404C85.018 218.829 82.8498 220.086 80.6508 221.18ZM177.632 123.251L87.1212 62.5809C85.0037 61.1615 82.8441 59.9091 80.6543 58.8176L119.887 32.5195C129.328 26.1912 141.688 26.1911 151.129 32.5195L197.706 63.741C214.168 74.7755 214.165 98.7625 197.776 109.748L177.632 123.251Z"
			fill="url(#paint0_linear)"
		/>
		<path
			fill-rule="evenodd"
			clip-rule="evenodd"
			d="M29.0584 59.905L104.266 9.49255C123.148 -3.16417 147.868 -3.16419 166.75 9.49253L213.327 40.714C246.141 62.7095 246.284 110.731 213.397 132.775L202.619 140L213.327 147.178C246.178 169.198 246.178 217.266 213.327 239.286L166.75 270.507C147.868 283.164 123.148 283.164 104.266 270.507L28.952 220.024C12.1679 210.859 0 193.315 0 171.365V108.635C0 86.6396 12.2183 69.0577 29.0584 59.905ZM27.9398 108.922C27.9398 99.6881 32.5567 91.0579 40.2587 85.8952L43.4214 83.7752C51.8861 79.5771 62.4584 79.547 71.5004 85.6079L81.0253 91.9925V188.007L71.523 194.377C62.4441 200.463 51.8258 200.412 43.343 196.172L40.2587 194.105C32.5567 188.942 27.9398 180.312 27.9398 171.078V108.922ZM108.965 169.279V110.721L152.645 140L108.965 169.279ZM80.6508 221.18L119.887 247.48C129.328 253.809 141.688 253.809 151.129 247.48L197.706 216.259C214.132 205.249 214.132 181.215 197.706 170.205L177.632 156.749L87.1438 217.404C85.018 218.829 82.8498 220.086 80.6508 221.18ZM177.632 123.251L87.1212 62.5809C85.0037 61.1615 82.8441 59.9091 80.6543 58.8176L119.887 32.5195C129.328 26.1912 141.688 26.1911 151.129 32.5195L197.706 63.741C214.168 74.7755 214.165 98.7625 197.776 109.748L177.632 123.251Z"
			fill="url(#paint1_radial)"
		/>
		<defs>
			<linearGradient
				id="paint0_linear"
				x1="236.32"
				y1="204.68"
				x2="-10.36"
				y2="34.72"
				gradientUnits="userSpaceOnUse"
			>
				<stop offset="0.229167" stop-color="#FF0056" />
				<stop offset="0.520833" stop-color="#3676F8" />
			</linearGradient>
			<radialGradient
				id="paint1_radial"
				cx="0"
				cy="0"
				r="1"
				gradientUnits="userSpaceOnUse"
				gradientTransform="translate(1.9595e-05 280) rotate(-25.0903) scale(330.153 280.63)"
			>
				<stop offset="0.411458" stop-color="#2EC997" />
				<stop offset="0.661458" stop-color="#2EC997" stop-opacity="0" />
			</radialGradient>
		</defs>
	</svg>
</a>

<style lang="scss">
	.logo {
		padding: var(--spacing-00);
		text-decoration: none;
		border-radius: var(--radius-1);
		transition: background-color ease-in-out 200ms;

		svg {
			display: block;
		}

		&:hover {
			background: var(--gray-400);
		}
	}
</style>
